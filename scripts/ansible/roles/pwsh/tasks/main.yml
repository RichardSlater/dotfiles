---
- name: Install PowerShell (pwsh)
  become: true
  block:
    - name: Install PowerShell on Debian/Ubuntu
      apt:
        deb: "https://github.com/PowerShell/PowerShell/releases/download/v{{ pwsh_target_version }}/powershell_{{ pwsh_target_version }}-1.deb_amd64.deb"
      when: ansible_facts['os_family'] == "Debian"

- name: Verify PowerShell Installation
  command: "pwsh --version"
  register: pwsh_version
  changed_when: false

- name: Show Installed PowerShell Version
  debug:
    msg: "Installed PowerShell Version: {{ pwsh_version.stdout }}"
